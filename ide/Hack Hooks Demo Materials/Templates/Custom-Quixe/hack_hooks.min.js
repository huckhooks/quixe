if(!window.console){window.console={log:function(a){}}}HackHooks=function(){return{main_winid:-1,windowdic:null,image:null,log:[],next_log:[],hash:null,send_response:null,started:function(b){console.log("started "+this.main_winid);this.image=b;this.hash=location.hash;var a=this;window.onhashchange=function(){a.hash_change()};console.log("replay");this.do_skein()},notify_new_win:function(a){if(this.main_winid==-1){this.main_winid=a}},gotLine:function(b){console.log(JSON.stringify(b));this.log.push(b.value);var a=JSON.stringify({log:this.log});console.log(a);var c="# "+a;location.hash=c;this.hash=location.hash;console.log("done")},load:function(){console.log("load");this.do_skein();return false},do_skein:function(){var b=location.hash.substring(1);console.log(b);if(b[0]==="%"){b=unescape(b)}this.next_log=[];try{b=JSON.parse(b);this.next_log=b.log}catch(d){}this.log=[];console.log(this.next_log);var c=this.windowdic.get(this.main_winid);for(var a=0;a<this.next_log.length;a++){this.send_response("line",c,this.next_log[a],null)}},hash_change:function(){var a=this.hash!==location.hash;console.log("hashchange "+a);if(a){console.log("old: "+this.hash);console.log("new: "+location.hash);if(true||confirm("url-skein has changed, reload?")){window.location.reload()}}return true},transform_output:function(d,f){var b;if(b=/^(.*?.). Url: (.*)$/.exec(f)){if(!/.*:.*/.exec(b[2])){b[2]="../Browsies/"+b[2]}var a=new Element("a",{href:b[2],target:"_blank",title:"opens in new window/tab"}).update(b[1]+".");d.appendChild(a);return true}else{if(b=/^(.*?.). Browse: (.*)/.exec(f)){if(!/.*:.*/.exec(b[2])){b[2]="../Browsies/"+b[2]}var a=new Element("a",{href:b[2],target:"_blank",title:"opens in new window/tab"}).update(b[1]+": "+b[2]);d.appendChild(a);var e=new Element("br",{});d.appendChild(e);var c=new Element("iframe",{src:b[2],style:"width: 100%; height: 300px"});d.appendChild(c);return true}else{if(b=/^(.*?.). Image: (.*)/.exec(f)){if(!/.*:.*/.exec(b[2])){b[2]="../Browsies/"+b[2]}var a=new Element("a",{href:b[2],target:"_blank",title:"opens in new window/tab"}).update(b[1]+": "+b[2]);d.appendChild(a);var e=new Element("br",{});d.appendChild(e);var c=new Element("img",{src:b[2]});d.appendChild(c);return true}}}return false}}}();